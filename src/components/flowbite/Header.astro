---
/**
 * Derived from Flowbite Header Component
 * @see https://flowbite.com/docs/components/navbar/
 */

export interface NavLink {
  label: string;
  href: string;
}

interface Props {
  links?: NavLink[];
}

const {
  links = [
    { label: "Home", href: "/" },
    { label: "About", href: "/about" },
    { label: "Projects", href: "/projects" },
    { label: "Contact", href: "/contact" },
  ],
} = Astro.props;

const pathname = Astro.url.pathname;

// Basic rule: exact match for "/", prefix match otherwise.
// (For hash links, active is usually only meaningful on the same page.)
const isActive = (href: string) => {
  const url = href.split("#")[0] || "/";
  return url === "/" ? pathname === "/" : pathname.startsWith(url);
};

const menuId = "navbar-main";
---

<header>
  <nav class="bg-neutral-primary fixed w-full z-20 top-0 start-0 border-b border-default">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
      <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
        <span class="self-center text-xl text-heading font-semibold whitespace-nowrap"
          >Amos Glenn</span
        >
      </a>
      <button
        data-collapse-toggle={menuId}
        type="button"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-body rounded-base md:hidden hover:bg-neutral-secondary-soft hover:text-heading focus:outline-none focus:ring-2 focus:ring-neutral-tertiary"
        aria-controls={menuId}
        aria-expanded="false"
      >
        <span class="sr-only">Open main menu</span>
        <svg
          class="w-6 h-6"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
          ><path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-width="2"
            d="M5 7h14M5 12h14M5 17h14"></path></svg
        >
      </button>
      <div class="hidden w-full md:block md:w-auto" id={menuId}>
        <ul
          class="font-medium flex flex-col p-4 md:p-0 mt-4 border border-default rounded-base bg-neutral-secondary-soft md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-neutral-primary"
        >
          {
            links.map((link) => {
              const active = isActive(link.href);
              return (
                <li>
                  <a
                    href={link.href}
                    class:list={[
                      "block rounded-sm px-3 py-2 md:p-0",
                      active
                        ? "bg-blue-700 text-white md:bg-transparent md:text-blue-700 dark:text-white md:dark:text-blue-500"
                        : "text-gray-900 hover:bg-gray-100 md:border-0 md:hover:bg-transparent md:hover:text-blue-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500",
                    ]}
                    aria-current={active ? "page" : undefined}
                  >
                    {link.label}
                  </a>
                </li>
              );
            })
          }
        </ul>
      </div>
    </div>
  </nav>
</header>
